<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Advanced CGPA Calculator</title>
  <style>
    :root {
      --bg: #f4f6fb;
      --card: #ffffff;
      --text: #222;
      --primary: #4f46e5;
    }
    body.dark {
      --bg: #0f172a;
      --card: #1e293b;
      --text: #e5e7eb;
    }
    body {
      background: var(--bg);
      color: var(--text);
      font-family: system-ui, sans-serif;
      padding: 20px;
    }
    h1 { text-align: center; }
    .container { max-width: 900px; margin: auto; }
    .card {
      background: var(--card);
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.08);
      margin-bottom: 20px;
    }
    input, select, button {
      padding: 8px;
      margin: 5px 0;
      width: 100%;
    }
    button {
      background: var(--primary);
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    button.secondary { background: #64748b; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #999;
      padding: 8px;
      text-align: center;
    }
    .actions button {
      margin: 0 3px;
      width: auto;
    }
    .result {
      font-size: 1.4rem;
      text-align: center;
      margin-top: 10px;
    }
  </style>
</head>
<body><h1>Advanced CGPA Calculator</h1><div class="container">  <div class="card">
    <h3>Add Course</h3>
    <input id="subject" placeholder="Subject Name" />
    <input id="credits" type="number" placeholder="Credits" />
    <select id="grade">
      <option value="10">O (10)</option>
      <option value="9">A+ (9)</option>
      <option value="8">A (8)</option>
      <option value="7">B+ (7)</option>
      <option value="6">B (6)</option>
      <option value="5">C (5)</option>
      <option value="0">F (0)</option>
    </select>
    <button onclick="addCourse()">Add</button>
  </div>  <div class="card">
    <h3>Courses</h3>
    <table>
      <thead>
        <tr><th>Subject</th><th>Credits</th><th>Grade</th><th>Actions</th></tr>
      </thead>
      <tbody id="table"></tbody>
    </table>
  </div>  <div class="card result">
    CGPA: <span id="cgpa">0.00</span><br />
    Percentage: <span id="percent">0%</span>
    <br /><br />
    <button onclick="calculate()">Calculate</button>
    <button class="secondary" onclick="clearAll()">Reset</button>
    <button class="secondary" onclick="toggleTheme()">Toggle Dark Mode</button>
  </div></div><script>
let courses = JSON.parse(localStorage.getItem('courses') || '[]');
let editIndex = null;

function render() {
  const tbody = document.getElementById('table');
  tbody.innerHTML = '';
  courses.forEach((c, i) => {
    tbody.innerHTML += `
      <tr>
        <td>${c.subject}</td>
        <td>${c.credits}</td>
        <td>${c.grade}</td>
        <td class="actions">
          <button onclick="editCourse(${i})">Edit</button>
          <button onclick="deleteCourse(${i})">Delete</button>
        </td>
      </tr>`;
  });
  localStorage.setItem('courses', JSON.stringify(courses));
}

function addCourse() {
  const subject = document.getElementById('subject').value.trim();
  const credits = Number(document.getElementById('credits').value);
  const grade = Number(document.getElementById('grade').value);

  if (!subject || !credits) return alert('Fill all fields');

  if (editIndex !== null) {
    courses[editIndex] = { subject, credits, grade };
    editIndex = null;
  } else {
    courses.push({ subject, credits, grade });
  }

  document.getElementById('subject').value = '';
  document.getElementById('credits').value = '';
  render();
}

function editCourse(i) {
  const c = courses[i];
  document.getElementById('subject').value = c.subject;
  document.getElementById('credits').value = c.credits;
  document.getElementById('grade').value = c.grade;
  editIndex = i;
}

function deleteCourse(i) {
  courses.splice(i, 1);
  render();
}

function calculate() {
  let totalC = 0, totalP = 0;
  courses.forEach(c => {
    totalC += c.credits;
    totalP += c.credits * c.grade;
  });
  const cgpa = totalC ? (totalP / totalC) : 0;
  document.getElementById('cgpa').innerText = cgpa.toFixed(2);
  document.getElementById('percent').innerText = (cgpa * 9.5).toFixed(2) + '%';
}

function clearAll() {
  courses = [];
  render();
  calculate();
}

function toggleTheme() {
  document.body.classList.toggle('dark');
}

render();
calculate();
</script></body>
</html>
